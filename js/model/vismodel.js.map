{"version":3,"sources":["/projects/nodejs/botbuilder/fdevstart/src/../src/model/vismodel.ts"],"names":[],"mappings":"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","file":"model/vismodel.js","sourcesContent":["/**\n * visualize a model and calculate some statistics\n */\n\n\n\nimport * as IMatch from '../match/ifmatch';\n\n\nimport * as fs from 'fs';\n\nimport { Model as Model } from 'mgnlq_model';\n\nimport * as Util from 'abot_utils';\n\nimport * as Describe from '../match/describe';\n\nimport * as _ from 'lodash';\nimport * as debug from 'debugf';\n\n//import * as elasticlunr from 'elasticlunr';\n\nvar debuglog = debug('vismodel');\n\ninterface CategoryRecord {\n  otherdomains: string[],\n  nrDistinctValues: number,\n  nrDistinctValuesInDomain: number,\n  nrRecords: number,\n  nrRecordsInDomain: number,\n  nrTotalRecordsInDomain: number\n};\n\nvar elasticlunr = require('elasticlunr');\n\n\nexport function JSONEscape(s: string) {\n\n  return s.replace(/\\\\/g, \"\\\\\\\\\").replace(/\\n/g, \"\\\\n\")\n    .replace(/\\'/g, \"\\\\'\")\n    .replace(/\\\"/g, '\\\\\"')\n    .replace(/\\&/g, \"\\\\&\")\n    .replace(/\\r/g, \"\\\\r\")\n    .replace(/\\t/g, \"\\\\t\");\n  // .replace(/\\b/g, \"\\\\b\")\n  // .replace(/\\f/g, \"\\\\f\");\n};\n\n\n// TODO: this has to be rewritten!\n\nexport function makeLunrIndex(modelpath: string, output: string, silent?: boolean) {\n  var mdl = JSON.parse('' + fs.readFileSync(modelpath + '.model.json'));\n  var data = JSON.parse('' + fs.readFileSync(modelpath + '.data.json'));\n\n  var cats = mdl.category.filter(a => typeof a !== 'string');\n\n  var qbeDataObjects = cats.filter(cat => (cat.QBE || cat.QBEInclude));\n\n  //console.log(\"here cats\" + JSON.stringify(cats));\n  //console.log(\"\\nhere data objects\" + JSON.stringify(qbeDataObjects));\n  var qbeDataNames = qbeDataObjects.map(cat => cat.name);\n\n  qbeDataNames = _.union(qbeDataNames, mdl.columns)\n\n\n  var LUNRIndex = cats.filter(cat => cat.LUNRIndex).map(cat => cat.name);\n  //var elasticlunr = require('lunr');\n  var bomdata = data;\n  // index all LUNR properties\n  var index = elasticlunr(function () {\n    var that = this;\n    LUNRIndex /*\n            [\"appId\",\n            \"AppKey\",\n            \"AppName\",\n                \"ApplicationComponent\",\n                \"RoleName\",\n                \"ApplicationType\",\n                \"BSPName\",\n                \"BSPApplicationURL\",\n                \"releaseName\",\n                \"BusinessCatalog\",\n                \"TechnicalCatalog\"] */ .forEach(function (field) {\n        that.addField(field);\n      });\n    this.setRef('id');\n    this.saveDocument(false);\n  });\n  bomdata.forEach(function (o, index) {\n    o.id = index;\n  });\n  bomdata.forEach(function (record) {\n    index.addDoc(record);\n  });\n  var elastic = index;\n\n  // dump the lunr index\n  //\n  var theIndex = index.toJSON();\n  var columns = mdl.columns.map(colname => {\n    var res = cats.filter(cat => cat.name === colname);\n    if (res.length !== 1) {\n      throw new Error(\"undefined or non-object column : \" + colname);\n    };\n    return res[0];\n  });\n\n  var columnNames = columns.map(col => col.name);\n\n  var jsonp = `var mdldata = {};\\n//columns \\n mdldata.columns = [\"${columns.map(col => col.name).join('\",\"')}\"];`;\n\n  var json = `{ \"columns\"  : [\"${columns.map(col => JSONEscape(col.name)).join('\",\"')}\"],`;\n  // jsonp += `\\n mdldata.fulldata = ${JSON.stringify(bomdata)};\\n`;\n  //jsonp += `\\n//columns info \\n mdldata.lunrcolumns = [\"{${LUNRIndex.join('\",\"')}\"];`;\n\n  jsonp += `\\n//columns info \\n mdldata.columnsDescription = {${columns.map(col =>\n    ` \\n \"${col.name}\" :  \"${JSONEscape(col.description || col.name)}\" `\n  ).join(',')}\n      };`;\n\n  json += `\"columnsDescription\" : {${columns.map(col =>\n    ` \\n \"${col.name}\" :  \"${JSONEscape(col.description || col.name)}\" `\n  ).join(',')}\n      },`;\n\n\n  jsonp += `\\n//columns info \\n mdldata.columnsDefaultWidth = {${columns.map(col =>\n    ` \\n \"${col.name}\" : ${col.defaultWidth || 150} `\n  ).join(',')}\n      };`;\n\n  json += `\\n\"columnsDefaultWidth\" : {${columns.map(col =>\n    ` \\n \"${col.name}\" : ${col.defaultWidth || 150} `\n  ).join(',')}\n      },`;\n\n\n\n  var theIndexStr = JSON.stringify(theIndex);\n\n  jsonp += \"\\nvar serIndex =\\\"\" + JSONEscape(theIndexStr) + \"\\\";\\n\";\n  // jsonp += \"\\nvar serIndex =\" + JSON.stringify(theIndex) + \";\\n\";\n\n\n  json += '\\n\"serIndex\" :' + theIndexStr + ',';\n\n  //console.log(\"here all names \" + JSON.stringify(qbeDataNames));\n  var cleanseddata = bomdata.map(o => {\n    var res = {};\n    qbeDataNames.forEach(key => {\n      res[key] = o[key];\n    });\n    return res;\n  });\n\n  if (!silent) {\n    console.log(\"dumping \" + output);\n    console.log(\"length of index str\" + theIndexStr.length)\n    console.log(\"available          \" + columns.length + \" columns\");\n    console.log(\"returning as data  \" + qbeDataNames.length + \" columns\");\n    console.log(\"indexing           \" + LUNRIndex.length + \" columns\");\n    console.log('returned but not available', _.difference(qbeDataNames, columnNames).join(\", \"));\n    console.log('returned but not indexed', _.difference(qbeDataNames, LUNRIndex).join(\", \"));\n  }\n\n  jsonp += \"var data=\" + JSON.stringify(cleanseddata) + \";\";\n\n  json += '\"data\":' + JSON.stringify(cleanseddata) + \"\\n}\";\n\n  jsonp += `\n\n           // var elastic = elasticlunr.Index.load(serIndex);\n\n  `;\n\n  //fs.writeFileSync(output + \".lunr.js\", jsonp);\n  fs.writeFileSync(output + \".lunr.json\", json);\n}\n\n\n\n\n\n/*\n\n  var index = elastilunr.Index.load(obj);\n\n\n}\n\n \"QBE\" : false,\n      \"QBEInclude\" : true,\n      \"LUNRIndex\": false\n*/\n\n\n\nexport function calcCategoryRecord(m: IMatch.IModels, category: string, domain: string, cache?: any): Promise<CategoryRecord> {\n\n  var otherdomains = Model.getDomainsForCategory(m, category);\n  _.pull(otherdomains, domain);\n  var res = {\n    otherdomains: otherdomains,\n    nrDistinctValues: 0,\n    nrDistinctValuesInDomain: 0,\n    nrRecords: 0,\n    nrRecordsInDomain: 0,\n    nrTotalRecordsInDomain: 0,\n  } as CategoryRecord;\n  if (cache) {\n    debuglog('got a cache' + Object.keys(cache));\n  }\n  cache = cache || {};\n  function getDomainRecords(dom): Promise<{\n    [key: string]: any;\n  }> {\n    if (cache[dom]) {\n      debuglog('seen domain ' + dom);\n      return Promise.resolve(cache[dom]);\n    } else {\n      debuglog('not seen domain ' + dom)\n      var p = Model.getExpandedRecordsFull(m, dom);\n      return p.then((records) => {\n        cache[dom] = records; return records;\n      })\n    }\n  }\n  var values = [];\n  var valuesInDomain = [];\n  var nrRecordsInDomain = 0;\n  debuglog('investigating' + domain + ' category' + category);\n  return getDomainRecords(domain).then((records) => {\n    res.nrTotalRecordsInDomain = records.length;\n    var distinctValues = records.forEach(function (oEntry) {\n      if (oEntry[category]) {\n        var value = oEntry[category];\n        valuesInDomain[value] = (valuesInDomain[value] || 0) + 1;\n        res.nrRecordsInDomain += 1;\n        values[value] = (values[value] || 0) + 1;\n        res.nrRecords += 1;\n      }\n    })\n  }).then(() =>\n    Promise.all(otherdomains.map(od =>\n      getDomainRecords(od).then((records) => {\n        //res.nrTotalRecordsInDomain = records.length;\n        var distinctValues = records.forEach(function (oEntry) {\n          if (oEntry[category]) {\n            var value = oEntry[category];\n            //valuesInDomain[value] = (valuesInDomain[value] || 0) + 1;\n            //res.nrRecordsInDomain += 1;\n            values[value] = (values[value] || 0) + 1;\n            res.nrRecords += 1;\n          }\n        })\n      })\n    )\n    ).then(() => {\n      res.nrDistinctValues = Object.keys(values).length;\n      res.nrDistinctValuesInDomain = Object.keys(valuesInDomain).length;\n      return res;\n    })\n    );\n}\n\n\n\nexport function graphDomain(domain: string, m: IMatch.IModels, domainRecordCache?: any): Promise<string> {\n  // draw a model domains\n  var res = `\n    digraph sdsu {\n\tsize=\"36,36\";\n   rankdir=LR\n\tnode [color=yellow, style=filled];\n    \"${domain}\"\n  `;\n  // add all category nodes\n  res += `node [shape=record, color=yellow, style=filled];\\n `\n  var cats = Model.getCategoriesForDomain(m, domain);\n  var domainRecordCache = domainRecordCache || {};\n  var categoryResults = {};\n  var otherdomains = [];\n  var nrRecords = 0;\n  var p = Promise.resolve();\n  cats.forEach(function (cat) {\n    p = p.then(() => {\n      return calcCategoryRecord(m, cat, domain, domainRecordCache).then(\n        (catResult) => {\n          debuglog('got result for ' + domain + ' ' + cat);\n          nrRecords = catResult.nrTotalRecordsInDomain;\n          categoryResults[cat] = catResult;\n          otherdomains = _.union(otherdomains, categoryResults[cat].otherDomains);\n          res += `\"${cat}\" [label=\"{ ${cat} | ${catResult.nrDistinctValuesInDomain} Values in ${catResult.nrRecordsInDomain} `;\n          if (catResult.nrRecordsInDomain !== catResult.nrRecords) {\n            res += `|  ${catResult.nrDistinctValues - catResult.nrDistinctValuesInDomain} other values in ${catResult.nrRecords - catResult.nrRecordsInDomain} other records`;\n          } else {\n            res += ` `;\n          }\n          res += `}\"]\\n`;\n        });\n    });\n  });\n  return p.then(() => {\n    // calculate other domains.\n    // draw \"other categories\"\n    res += `node [color=purple, style=filled]; \\n`\n    otherdomains.forEach(function (otherdomain) {\n      res += `\"${otherdomain}\" \\n`;\n    });\n    // count records in domain :\n    /* var nrRecords = m.records.reduce(function (prev, entry) {\n        return prev + ((entry._domain === domain) ? 1 : 0);\n      }, 0);\n      */\n    res += `node [shape=record]; \\n`\n    res += ` \"record\" [label=\"{<f0> ${domain} | ${nrRecords}}\"] \\n`;\n\n    res += ` \"r_other\" [label=\"{<f0> other | ${nrRecords}}\"] \\n `;\n\n    res += `# relation from categories to domain\\n`;\n    cats.forEach(function (cat) {\n      res += ` \"${cat}\" -> \"${domain}\" \\n`;\n    })\n\n    res += `# relation from categories to records\\n`;\n    cats.forEach(function (cat) {\n      var rec = categoryResults[cat];\n      res += ` \"${cat}\" -> \"record\" \\n`;\n    })\n\n    //other domains to this\n    cats.forEach(function (cat) {\n    })\n    /*\n    cats fo\n      digraph sdsu {\n    size=\"36,36\";\n    node [color=yellow, style=filled];\n    FLPD FLP \"BOM Editor\", \"WIKIURL\" \"UI5 Documentation\", \"UI5 Example\", \"STARTTA\"\n    BCP\n    node [color=grey, style=filled];\n    node [fontname=\"Verdana\", size=\"30,30\"];\n    node [color=grey, style=filled];\n    graph [ fontname = \"Arial\",\n    */\n    res += `}\\n`;\n    return res;\n  });\n}\n/*\n    categoryDesc : theModel.full.domain[filterdomain].categories[category],\n    distinct : distinct,\n    delta : delta,\n    presentRecords : recordCount.presentrecords,\n    percPresent : percent,\n    sampleValues : valuesList\n  }\n*/\n\nfunction replaceBr(string: string): string {\n  string = string.replace(/\\n/g,\n    `\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tbr\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t| `\n  );\n  return string;\n}\n\n\n\n/**\n * generate a textual representation of a domain\n */\nexport function tabDomain(domain: string, m: IMatch.IModels): Promise<string> {\n  // draw a model domains\n  var res = '';\n  var modelCache = {};\n  var cats = Model.getCategoriesForDomain(m, domain);\n  cats = Model.sortCategoriesByImportance(m.full.domain[domain].categories || {}, cats);\n  //console.log(cats.join(\"\\n\"));\n  return Describe.getCategoryStatsInDomain(cats[0], domain, m).then((catResult0) => {\n    return calcCategoryRecord(m, cats[0], domain, modelCache).then((catResult1) => {\n\n      var domainDescr = m.full.domain[domain].description || \"\";\n      domainDescr = replaceBr(domainDescr);\n      res = `\n\n// preset form values if we receive a userdata object //\n- user = user\n\nextends ../layout_p\n\nblock content\n\n\tnav.navbar.navbar-default.navbar-fixed-top\n\t\t.container\n\t\t\t.navbar-header\n\t\t\t\t.navbar-brand(style='bgcolor:orange;color:darkblue;font-family:Arial Black;font-size:15.118px') wosap domain ${domain}\n\t\t\tul.nav.navbar-nav.navbar-right #{uid}\n\t\t\t\tli\n\t\t\t\t\t.navbar-btn#btn-logout.btn.btn-default(onclick=\"location.href='/home'\")\n\t\t\t\t\t\t| back to home\n\n\tp  &nbsp;\n\tp &nbsp;\n\tp\n\n\tdiv.well\n\t\th3 domain \"${domain}\"\n\t\t\tspan.pull-right ${catResult1.nrTotalRecordsInDomain} records\n\t\tp\n\t\tspan ${domainDescr}\n\n\t\ttable.table.table-condensed.table-striped\n\t\t\tthead\n\t\t\t\ttr\n\t\t\t\t\tth category\n\t\t\t\t\tth(style=\"width:10%\") count\n\t\t\t\t\tth\n\t\t\t\t\t\ttable\n\t\t\t\t\t\t\ttr\n\t\t\t\t\t\t\t\ttd synonyms\n\t\t\t\t\t\t\ttr\n\t\t\t\t\t\t\t\ttd description\n\t\t\t\t\t\t\ttr\n\t\t\t\t\t\t\t\ttd example values\n\t\t\ttbody\n`;\n\n      var categoryResults = {};\n      var otherdomains = [];\n      var categoryMap = m.full.domain[domain].categories || {};\n      var pTail = Promise.resolve();\n      cats.forEach(function (cat) {\n        pTail = pTail.then(() => {\n          return Describe.getCategoryStatsInDomain(cat, domain, m).then(\n            catdesc => {\n              return calcCategoryRecord(m, cat, domain, modelCache).then((catResult2) => {\n                categoryResults[cat] = catResult2;\n                otherdomains = _.union(otherdomains, categoryResults[cat].otherDomains);\n                /*\n                    res += `\"${cat}\" [label=\"{ ${cat} | ${catResult.nrDistinctValuesInDomain} Values in ${catResult.nrRecordsInDomain} `;\n                    if(catResult.nrRecordsInDomain !== catResult.nrRecords) {\n                      res +=  `|  ${catResult.nrDistinctValues - catResult.nrDistinctValuesInDomain} other values in ${catResult.nrRecords - catResult.nrRecordsInDomain} other records`;\n                    } else {\n                      res += ` `;\n                    }\n                    res += `}\"]\\n`;\n                */\n                //console.log(JSON.stringify(m.full.domain[domain]));\n                if (m.full.domain[domain].categories[cat]) {\n                  var synonymsString = Util.listToCommaAnd(catdesc.categoryDesc && catdesc.categoryDesc.category_synonyms && catdesc.categoryDesc.category_synonyms || []) || \"&nbsp;\";\n\n                  res += `\n\t\t\ttr\n\t\t\t\t\ttd.cat_count ${cat}\n\\t\\t\\t\\t\\ttd ${catdesc.presentRecords} distinct values in ${catdesc.percPresent}% of records\n\\t\\t\\t\\t\\ttd\n\\t\\t\\t\\t\\t\\ttable\n\\t\\t\\t\\t\\t\\t\\ttr.cat_synonyms\n\\t\\t\\t\\t\\t\\t\\t\\ttd ${synonymsString}\n\\t\\t\\t\\t\\t\\t\\ttr.cat_description\n\\t\\t\\t\\t\\t\\t\\t\\ttd ${replaceBr(catdesc.categoryDesc && catdesc.categoryDesc.category_description || \"\")}\n\\t\\t\\t\\t\\t\\t\\ttr.cat_samplevalues\n\\t\\t\\t\\t\\t\\t\\t\\ttd ${replaceBr(catdesc.sampleValues)}\n      `;\n                }\n              }\n              );\n              //console.log(JSON.stringify(catdesc));\n            });\n        });\n      });\n      return pTail.then(() => {\n        var othercats = cats.length - Object.keys(m.full.domain[domain].categories).length;\n        var remainingCategories = _.difference(cats, Object.keys(m.full.domain[domain].categories));\n        if ((othercats) > 0) {\n          res += `\n\\t\\tp   and ${othercats} other categories\n\\t\\t| ${Util.listToCommaAnd(remainingCategories)}\n       `\n        }\n        /*\n          // calculate other domains.\n          // draw \"other categories\"\n          res += `node [color=purple, style=filled]; \\n`\n          otherdomains.forEach(function(otherdomain) {\n            res += `\"${otherdomain}\" \\n`;\n          });\n          // count records in domain :\n          var nrRecords = m.records.reduce(function(prev,entry) {\n          return prev + ((entry._domain === domain) ? 1 : 0);\n          },0);\n          res += `node [shape=record]; \\n`\n          res += ` \"record\" [label=\"{<f0> ${domain} | ${nrRecords}}\"] \\n`;\n\n          res += ` \"r_other\" [label=\"{<f0> other | ${nrRecords}}\"] \\n `;\n\n          res += `# relation from categories to domain\\n`;\n          cats.forEach(function(cat) {\n            res += ` \"${cat}\" -> \"${domain}\" \\n`;\n          })\n\n\n          res += `# relation from categories to records\\n`;\n          cats.forEach(function(cat) {\n            var rec = categoryResults[cat];\n            res += ` \"${cat}\" -> \"record\" \\n`;\n          })\n\n\n          //other domains to this\n          cats.forEach(function(cat) {\n\n\n          })\n        */\n        /*\n        cats fo\n          digraph sdsu {\n        size=\"36,36\";\n        node [color=yellow, style=filled];\n        FLPD FLP \"BOM Editor\", \"WIKIURL\" \"UI5 Documentation\", \"UI5 Example\", \"STARTTA\"\n        BCP\n        node [color=grey, style=filled];\n        node [fontname=\"Verdana\", size=\"30,30\"];\n        node [color=grey, style=filled];\n        graph [ fontname = \"Arial\",\n        */\n        res += `\n\t\th3 Version\n\t\t\ta.small(href=\"/whatsnew\")\n\n\nblock scripts\n\tscript(src='/vendor/jquery-2.2.3.min.js')\n\tscript(src='/vendor/bootstrap.min.js')\n\tscript(src='/js/views/settings.js')\n`;\n        return res;\n      });\n    });\n  }).then(() => {\n    return res;\n  });\n}\n\n\nimport { exec } from 'child_process';\n\n\nfunction execCmd(cmd: string) {\n  exec(cmd, function (error, stdout, stderr) {\n    if (error) {\n      console.error(`exec error: ${error}`)\n      return\n    }\n    console.log(`stdout: ${stdout}`)\n    console.log(`stderr: ${stderr}`)\n  })\n};\n\nexport function visModels(m: IMatch.IModels, folderOut: string): Promise<any> {\n  // we want to execute the domains in sequence to avoid and out of memory\n  var p = Promise.resolve();\n  var domainRecordCache = {};\n  m.domains.forEach(sDomain => {\n    p = p.then(() => {\n      return graphDomain(sDomain, m, domainRecordCache).then((s) => {\n        debuglog('done with result for ' + sDomain + ' ' + s.length);\n        var fnGraph = folderOut + \"/\" + sDomain.replace(/ /g, '_') + \".gv\";\n        fs.writeFileSync(fnGraph, s);\n        if (process.env.GRAPHVIZ) {\n          console.log(\"here the file \" + fnGraph);\n          execCmd(process.env.GRAPHVIZ + \" -Tjpeg -O \" + fnGraph);\n        }\n        return undefined;\n      }\n      );\n    })\n  });\n  return p;\n};\n/*\n  return Promise.all(m.domains.map(function (sDomain) {\n    console.log('making domain' + sDomain);\n    return graphDomain(sDomain, m).then((s) => {\n      var fnGraph = folderOut + \"/\" + sDomain.replace(/ /g, '_') + \".gv\";\n      fs.writeFileSync(fnGraph, s);\n      if (process.env.GRAPHVIZ) {\n        console.log(\"here the file \" + fnGraph);\n        execCmd(process.env.GRAPHVIZ + \" -Tjpeg -O \" + fnGraph);\n      }\n    });\n  })\n  );\n}\n*/\n\nexport function tabModels(m: IMatch.IModels, folderOut: string): Promise<any> {\n  var p = Promise.resolve();\n  m.domains.forEach((sDomain) => {\n    p = p.then(() => {\n      tabDomain(sDomain, m).then((s) => {\n        var fnGraph = folderOut + \"/\" + sDomain.replace(/ /g, '_') + \".jade\";\n        debuglog(\"here the file \" + fnGraph);\n        fs.writeFileSync(fnGraph, s);\n      });\n    });\n  });\n  return p.then(() => { });\n}\n"],"sourceRoot":"ABC"}